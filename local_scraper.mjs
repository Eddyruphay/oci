const { default: fetch } = await import('node-fetch');
import * as cheerio from 'cheerio';

async function scrape() {
    const targetUrl = "https://www.xnxx.com/";

    const headers = {
        'upgrade-insecure-requests': '1',
        'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Mobile Safari/537.36',
        'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
        'sec-ch-ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"',
        'sec-ch-ua-mobile': '?1',
        'sec-ch-ua-platform': '"Android"',
        'sec-fetch-site': 'none',
        'sec-fetch-mode': 'navigate',
        'sec-fetch-user': '?1',
        'sec-fetch-dest': 'document',
        'accept-encoding': 'gzip, deflate, br, zstd',
        'accept-language': 'pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7',
        'cookie': 'session_blih=2431a9c8591076450_N0z9ym0zg1HCQQVxGP61YCKJkebfWniruwLAPh7nU%3D; cksd=true; freechvws=323484125%2C259300115%2C4007511159%2C467548679%2C543266693; cit=f2669af7e55eb73ebZOXPwJl5H6DFh7NB_M3qw%3D%3D; last_views=%5B%2268845311-1754284359%22%2C%2279160999-1754286217%22%2C%2254138191-1754338974%22%2C%2261863939-1754339403%22%2C%2267886051-1754351187%22%2C%2270653625-1754351230%22%2C%2278141681-1754457768%22%2C%2284025161-1754457911%22%2C%2250482875-1754457928%22%2C%2235459919-1754458184%22%2C%2264021807-1754459166%22%2C%2230419235-1754525218%22%2C%2220403169-1754525329%22%2C%2245454811-1754525605%22%2C%2275818777-1754543396%22%2C%2265516111-1754543767%22%2C%2269551365-1754544090%22%2C%2225738455-1754544347%22%2C%2285997887-1754852389%22%2C%2251130087-1754853128%22%2C%2285584289-1755125452%22%2C%22261562-1755125566%22%2C%2277313131-1755183347%22%2C%2271829095-1755183388%22%2C%2273191197-1755404726%22%2C%2282574729-1755405104%22%2C%2282632073-1755491775%22%2C%2277000935-1755492918%22%2C%2275354095-1755557075%22%2C%2251181573-1755557159%22%2C%2275399393-1755667902%22%2C%2284814403-1755668098%22%2C%2266163535-1755668555%22%2C%2284942357-1755668713%22%2C%2284000961-1755668725%22%2C%2263614923-1755668952%22%2C%2268909725-1755668961%22%2C%2261291305-1755668979%22%2C%2284162257-1755669184%22%2C%2260623337-1755669388%22%2C%2285293503-1755670019%22%2C%2270129349-1755811106%22%2C%2283474959-1755909480%22%2C%2275398121-1755909775%22%2C%2277825789-1756006522%22%2C%2235022769-1756006548%22%2C%226327819-1756006807%22%2C%2218589355-1756007134%22%2C%2246397583-1756007250%22%2C%2230243103-1756007416%22%2C%228921527-1756007622%22%2C%2274328299-1756007756%22%2C%2228267969-1756007982%22%2C%2224559249-1756310068%22%2C%2230898519-1756310274%22%2C%2261342489-1756310398%22%2C%2275548477-1756311128%22%2C%2253975125-1756954224%22%2C%2275049039-1756966662%22%5D; session_token=15876401b44e2a65CeAwwSIPOlanTH33ijs4xcLlsVsowYF155G70V5DDlWpEPKTat89PJhZCHmgpBGiwO4ZhvzkVYR1q5zdXeKSe3O9TTTKFbwesLUzfx1GdU9lc1rPE7sGnKncQf5tJanDG6oGYlhGw3a3LxdKqqQPmvkaxrUZohOUW9Z10ZIVCAXkuWfmec4jcpjiyKIbNsGMphguY5qaSFFvcw-Ms4g7zCw4HTwSmF5_aHQSCjXzMrqJ8NAaLkitCYji4-lnOIthPRH_76usbPmC-aQQoLyMVDFOO5a6wP6DtDlx8xZuthimpvY4whNPwP3Y0SqnmM4G-i34omxm8DE30y9vBckuZlUwEcBpS_MbmjHOTfsQMbJj4xkvBcs5h9bZ1kqZKMVIBH1l0_HEiQh33uUTLpvkmAxm1urj0B0DofraFS-Ri8605KLxUIDOrEhorummSR-kLQXlz-3KIZ_mnH6Pznv1MAAYCOlkFXzNzAmpK-g2tRP1W581aTd05nLu5_4vLmNLA0OLgKZJhCqKP46rqB6WE3E_ZGhG1VEU19iG9wisXUgK7EQvD0_aO1ANZjm6yzoI'
    };

    try {
        // Step 1: Fetch main page and get video page URLs
        console.log('Fetching main page...');
        const mainPageResponse = await fetch(targetUrl, { headers });
        const mainPageHtml = await mainPageResponse.text();
        
        console.log(mainPageHtml);

    } catch (error) {
        console.error('An error occurred:', error);
    }
}

scrape();
